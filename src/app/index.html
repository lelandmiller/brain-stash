<!DOCTYPE html>
<html lang="en">

<head>
    <title>Note Pro</title>

    <link type="text/css" href="assets/main.css" rel="stylesheet">

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>

    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [
                    ['$', '$'],
                    ['\\(', '\\)']
                ]
            }
        });
    </script>

</head>

<body>
    <div id="wrapper">
        <div id="top-menu">NotePro

        </div>
        <div id="editor"></div>
        <div id="preview"></div>
    </div>

    <script src="lib/markdown.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js"></script>
    <script>
        var marked = require('marked');

        var preview = document.getElementById('preview');
        var editor = ace.edit("editor");
        editor.setTheme("ace/theme/monokai");
        editor.getSession().setMode("ace/mode/markdown");

        editor.getSession().on('change', function(e) {
            //console.log(markdown.toHTML(editor.getValue()));
            preview.innerHTML = marked(editor.getValue());
            MathJax.Hub.Queue(["Typeset", MathJax.Hub, "preview"]);
        });


         // enable livereload
        console.log('Loading gaze...');
        var Gaze = require('gaze').Gaze;
        var gaze = new Gaze('**/*');

        gaze.on('all', function(event, filepath) {
            console.log('Change detected.');
            if (location)
                location.reload();
        });
    </script>
</body>

</html>
